(function(){"use strict";var t={2810:function(t,n,e){var o=e(9242),i=e(3396);const s={id:"app"},a=(0,i._)("div",{class:"powered-by"},[(0,i._)("div",{class:"text"},"Powered by"),(0,i._)("a",{href:"https://barkle.chat/",target:"_blank",rel:"noopener noreferrer"},[(0,i._)("img",{src:"https://barkle.us-east-1.linodeobjects.com/bk_/a4d9fb77-7120-486c-848c-5c0e7ff21069.png",alt:"Barkle",class:"barkle-logo"})])],-1);function r(t,n,e,o,r,c){const l=(0,i.up)("RPlaceCanvas");return(0,i.wg)(),(0,i.iD)("div",s,[(0,i.Wm)(l),a])}var c=e(7139);const l={class:"canvas-wrapper"},u={class:"canvas-container"},h={key:0,class:"countdown"},d={class:"color-palette"},f=["onClick"];function p(t,n,e,o,s,a){return(0,i.wg)(),(0,i.iD)("div",l,[(0,i._)("div",u,[(0,i._)("canvas",{ref:"canvas",onMousedown:n[0]||(n[0]=(...t)=>a.startDrawing&&a.startDrawing(...t)),onMousemove:n[1]||(n[1]=(...t)=>a.draw&&a.draw(...t)),onMouseup:n[2]||(n[2]=(...t)=>a.stopDrawing&&a.stopDrawing(...t)),onMouseout:n[3]||(n[3]=(...t)=>a.stopDrawing&&a.stopDrawing(...t)),onTouchstart:n[4]||(n[4]=(...t)=>a.startDrawingTouch&&a.startDrawingTouch(...t)),onTouchmove:n[5]||(n[5]=(...t)=>a.drawTouch&&a.drawTouch(...t)),onTouchend:n[6]||(n[6]=(...t)=>a.stopDrawing&&a.stopDrawing(...t))},null,544),s.canPlaceTile?(0,i.kq)("",!0):((0,i.wg)(),(0,i.iD)("div",h,(0,c.zw)(a.getCountdownText()),1))]),(0,i._)("div",d,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(s.colors,((t,n)=>((0,i.wg)(),(0,i.iD)("div",{key:n,style:(0,c.j5)({background:t}),onClick:t=>a.selectColor(n),class:(0,c.C_)({selected:s.selectedColor===n})},null,14,f)))),128))])])}var w=e(2066),g=e(2617),v=e.n(g);function m(t){const n=`; ${document.cookie}`,e=n.split(`; ${t}=`);if(2===e.length)return e.pop().split(";").shift()}function T(t,n,e=30){const o=new Date;o.setTime(o.getTime()+24*e*60*60*1e3);const i=`; expires=${o.toUTCString()}`;document.cookie=`${t}=${n}${i}; path=/`}var C={data(){return{drawing:!1,context:null,selectedColor:0,socket:null,panzoomInstance:null,colors:["#FFFFFF","#C1C1C1","#EF130B","#FF7100","#FFE400","#00CC00","#00B2FF","#231FD3","#A300BA","#D37CAA","#A0522D","#000000","#4C4C4C","#740B07","#C23800","#E8A200","#005510","#00569E","#0E0865","#550069","#A75574","#63300D"],countdownTime:0,canPlaceTile:!0}},methods:{startDrawing(t){this.canPlaceTile&&(this.drawing=!0,this.draw(t))},draw(t){if(!this.drawing||!this.canPlaceTile)return;const{x:n,y:e}=this.getCanvasCoordinates(t);this.context.fillStyle=this.colors[this.selectedColor],this.context.fillRect(10*n,10*e,10,10),this.socket.emit("placeTile",{x:n,y:e,color:this.selectedColor}),this.startTilePlacingCooldown()},stopDrawing(){this.drawing=!1},startDrawingTouch(t){this.canPlaceTile&&(t.preventDefault(),this.startDrawing(t.touches[0]))},drawTouch(t){this.canPlaceTile&&(t.preventDefault(),this.draw(t.touches[0]))},selectColor(t){this.selectedColor=t},startTilePlacingCooldown(){this.canPlaceTile=!1,this.countdownTime=5;const t=Date.now()+1e3*this.countdownTime;T("cooldownEndTime",t);const n=setInterval((()=>{const e=Math.floor((t-Date.now())/1e3);e>=0?this.countdownTime=e:(clearInterval(n),this.canPlaceTile=!0)}),1e3)},getCountdownText(){return`You can place another tile in: ${this.countdownTime} seconds`},getCanvasCoordinates(t){const n=this.$refs.canvas.getBoundingClientRect(),e=this.panzoomInstance.getTransform().scale,o=(t.clientX-n.left)/e,i=(t.clientY-n.top)/e,s=Math.floor(o/10),a=Math.floor(i/10);return{x:s,y:a}}},mounted(){this.$refs.canvas.width=700,this.$refs.canvas.height=700,this.context=this.$refs.canvas.getContext("2d"),this.socket=(0,w.ZP)("https://place-event.bndt.cloud"),this.socket.on("initialState",(t=>{t.forEach((({x:t,y:n,color:e})=>{this.context.fillStyle=this.colors[e],this.context.fillRect(10*t,10*n,10,10)}))})),this.socket.on("tilePlaced",(({x:t,y:n,color:e})=>{this.context.fillStyle=this.colors[e],this.context.fillRect(10*t,10*n,10,10)})),this.panzoomInstance=v()(this.$refs.canvas,{maxZoom:2,minZoom:.5,bounds:!0,boundsPadding:.1,onStateChange:()=>{this.$refs.canvas.style.width=500*this.panzoomInstance.getTransform().scale+"px",this.$refs.canvas.style.height=500*this.panzoomInstance.getTransform().scale+"px"}});const t=parseInt(m("cooldownEndTime"),10);t&&!isNaN(t)&&t>Date.now()&&(this.countdownTime=Math.floor((t-Date.now())/1e3),this.startTilePlacingCooldown())}},b=e(89);const y=(0,b.Z)(C,[["render",p]]);var D=y,k={components:{RPlaceCanvas:D}};const x=(0,b.Z)(k,[["render",r]]);var P=x;const _=(0,w.ZP)("https://place-event.bndt.cloud"),F=(0,o.ri)(P);F.provide("socket",_),F.mount("#app")}},n={};function e(o){var i=n[o];if(void 0!==i)return i.exports;var s=n[o]={exports:{}};return t[o](s,s.exports,e),s.exports}e.m=t,function(){var t=[];e.O=function(n,o,i,s){if(!o){var a=1/0;for(u=0;u<t.length;u++){o=t[u][0],i=t[u][1],s=t[u][2];for(var r=!0,c=0;c<o.length;c++)(!1&s||a>=s)&&Object.keys(e.O).every((function(t){return e.O[t](o[c])}))?o.splice(c--,1):(r=!1,s<a&&(a=s));if(r){t.splice(u--,1);var l=i();void 0!==l&&(n=l)}}return n}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[o,i,s]}}(),function(){e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,{a:n}),n}}(),function(){e.d=function(t,n){for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};e.O.j=function(n){return 0===t[n]};var n=function(n,o){var i,s,a=o[0],r=o[1],c=o[2],l=0;if(a.some((function(n){return 0!==t[n]}))){for(i in r)e.o(r,i)&&(e.m[i]=r[i]);if(c)var u=c(e)}for(n&&n(o);l<a.length;l++)s=a[l],e.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return e.O(u)},o=self["webpackChunkmy_place"]=self["webpackChunkmy_place"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=e.O(void 0,[998],(function(){return e(2810)}));o=e.O(o)})();
//# sourceMappingURL=app.2c754e60.js.map