(function(){"use strict";var t={28:function(t,e,n){var o=n(9242),r=n(3396);const a={id:"app"},s=(0,r._)("div",{class:"powered-by"},[(0,r._)("div",{class:"text"},"Powered by"),(0,r._)("a",{href:"https://barkle.chat/",target:"_blank",rel:"noopener noreferrer"},[(0,r._)("img",{src:"https://barkle.us-east-1.linodeobjects.com/bk_/a4d9fb77-7120-486c-848c-5c0e7ff21069.png",alt:"Barkle",class:"barkle-logo"})])],-1);function i(t,e,n,o,i,c){const l=(0,r.up)("RPlaceCanvas");return(0,r.wg)(),(0,r.iD)("div",a,[(0,r.Wm)(l),s])}var c=n(7139);const l={class:"canvas-wrapper"},u={class:"canvas-container"},h={key:0,class:"countdown"},d={class:"color-palette"},f=["onClick"];function p(t,e,n,o,a,s){return(0,r.wg)(),(0,r.iD)("div",l,[(0,r._)("div",u,[(0,r._)("canvas",{ref:"canvas",onMousedown:e[0]||(e[0]=(...t)=>s.startDrawing&&s.startDrawing(...t)),onMousemove:e[1]||(e[1]=(...t)=>s.draw&&s.draw(...t)),onMouseup:e[2]||(e[2]=(...t)=>s.stopDrawing&&s.stopDrawing(...t)),onMouseout:e[3]||(e[3]=(...t)=>s.stopDrawing&&s.stopDrawing(...t)),onTouchstart:e[4]||(e[4]=(...t)=>s.startDrawingTouch&&s.startDrawingTouch(...t)),onTouchmove:e[5]||(e[5]=(...t)=>s.drawTouch&&s.drawTouch(...t)),onTouchend:e[6]||(e[6]=(...t)=>s.stopDrawing&&s.stopDrawing(...t))},null,544),a.canPlaceTile?(0,r.kq)("",!0):((0,r.wg)(),(0,r.iD)("div",h,(0,c.zw)(s.getCountdownText()),1))]),(0,r._)("div",d,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(a.colors,((t,e)=>((0,r.wg)(),(0,r.iD)("div",{key:e,style:(0,c.j5)({background:t}),onClick:t=>s.selectColor(e),class:(0,c.C_)({selected:a.selectedColor===e})},null,14,f)))),128))])])}var v=n(2066),g=n(2617),w=n.n(g),m={data(){return{drawing:!1,context:null,selectedColor:0,socket:null,panzoomInstance:null,colors:["#FFFFFF","#C1C1C1","#EF130B","#FF7100","#FFE400","#00CC00","#00B2FF","#231FD3","#A300BA","#D37CAA","#A0522D","#000000","#4C4C4C","#740B07","#C23800","#E8A200","#005510","#00569E","#0E0865","#550069","#A75574","#63300D"],countdownTime:0,canPlaceTile:!0}},methods:{startDrawing(t){this.drawing=!0,this.draw(t)},draw(t){if(!this.drawing||!this.canPlaceTile)return;const{x:e,y:n}=this.getCanvasCoordinates(t);this.context.fillStyle=this.colors[this.selectedColor],this.context.fillRect(10*e,10*n,10,10),this.socket.emit("placeTile",{x:e,y:n,color:this.selectedColor}),this.startTilePlacingCooldown()},stopDrawing(){this.drawing=!1},startDrawingTouch(t){this.canPlaceTile&&(t.preventDefault(),this.startDrawing(t.touches[0]))},drawTouch(t){this.canPlaceTile&&(t.preventDefault(),this.draw(t.touches[0]))},selectColor(t){this.selectedColor=t},startTilePlacingCooldown(){this.canPlaceTile=!1,this.countdownTime=5;const t=setInterval((()=>{this.countdownTime>0?this.countdownTime--:(clearInterval(t),this.canPlaceTile=!0)}),1e3)},getCountdownText(){return`You can place another tile in: ${this.countdownTime} seconds`},getCanvasCoordinates(t){const e=this.$refs.canvas.getBoundingClientRect(),n=this.panzoomInstance.getTransform().scale,o=(t.clientX-e.left)/n,r=(t.clientY-e.top)/n,a=Math.floor(o/10),s=Math.floor(r/10);return{x:a,y:s}}},mounted(){this.$refs.canvas.width=601,this.$refs.canvas.height=601,this.context=this.$refs.canvas.getContext("2d"),this.socket=(0,v.ZP)("https://place-event.bndt.cloud"),this.socket.on("initialState",(t=>{t.forEach((({x:t,y:e,color:n})=>{this.context.fillStyle=this.colors[n],this.context.fillRect(10*t,10*e,10,10)}))})),this.socket.on("tilePlaced",(({x:t,y:e,color:n})=>{this.context.fillStyle=this.colors[n],this.context.fillRect(10*t,10*e,10,10)})),this.panzoomInstance=w()(this.$refs.canvas,{maxZoom:2,minZoom:.5,bounds:!0,boundsPadding:.1,onStateChange:()=>{this.$refs.canvas.style.width=500*this.panzoomInstance.getTransform().scale+"px",this.$refs.canvas.style.height=500*this.panzoomInstance.getTransform().scale+"px"}})}},C=n(89);const T=(0,C.Z)(m,[["render",p]]);var b=T,y={components:{RPlaceCanvas:b}};const D=(0,C.Z)(y,[["render",i]]);var x=D;const k=(0,v.ZP)("https://place-event.bndt.cloud"),P=(0,o.ri)(x);P.provide("socket",k),P.mount("#app")}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,n),a.exports}n.m=t,function(){var t=[];n.O=function(e,o,r,a){if(!o){var s=1/0;for(u=0;u<t.length;u++){o=t[u][0],r=t[u][1],a=t[u][2];for(var i=!0,c=0;c<o.length;c++)(!1&a||s>=a)&&Object.keys(n.O).every((function(t){return n.O[t](o[c])}))?o.splice(c--,1):(i=!1,a<s&&(s=a));if(i){t.splice(u--,1);var l=r();void 0!==l&&(e=l)}}return e}a=a||0;for(var u=t.length;u>0&&t[u-1][2]>a;u--)t[u]=t[u-1];t[u]=[o,r,a]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var r,a,s=o[0],i=o[1],c=o[2],l=0;if(s.some((function(e){return 0!==t[e]}))){for(r in i)n.o(i,r)&&(n.m[r]=i[r]);if(c)var u=c(n)}for(e&&e(o);l<s.length;l++)a=s[l],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(u)},o=self["webpackChunkmy_place"]=self["webpackChunkmy_place"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(28)}));o=n.O(o)})();
//# sourceMappingURL=app.2214f2e2.js.map